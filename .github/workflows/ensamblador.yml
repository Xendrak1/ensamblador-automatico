set pagination off
set logging file gdb.log
set logging enabled on

file programa
break _start
run

# Capturar estado inicial
echo \n[ESTADO INICIAL]\n
info variables
info registers

# Examinar memoria inicial
echo \n[MEMORIA INICIAL]\n
x/32xb 0x402000    # Variables en memoria
x/8xw  0x402000    # Valores en formato word
x/32c  0x40200c    # Cadena en memoria (NOMBRE)

# Ejecutar programa paso a paso
echo \n[EJECUCIÃ“N PASO A PASO]\n

# Paso 1
stepi
echo \n[PASO 1]\n
info registers
x/32xb 0x402000
x/8xw  0x402000

# Paso 2
stepi
echo \n[PASO 2]\n
info registers
x/32xb 0x402000
x/8xw  0x402000

# Paso 3
stepi
echo \n[PASO 3]\n
info registers
x/32xb 0x402000
x/8xw  0x402000

# Estado final y backtrace
echo \n[ESTADO FINAL]\n
info registers
x/32xb 0x402000
x/8xw  0x402000
backtrace

quit